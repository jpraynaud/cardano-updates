<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-updates">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Cardano Development Updates | Cardano Development Updates</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://updates.cardano.intersectmbo.org/page/138"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Cardano Development Updates | Cardano Development Updates"><meta data-rh="true" name="description" content="Regular updates from Cardano Development Teams"><meta data-rh="true" property="og:description" content="Regular updates from Cardano Development Teams"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://updates.cardano.intersectmbo.org/page/138"><link data-rh="true" rel="alternate" href="https://updates.cardano.intersectmbo.org/page/138" hreflang="en"><link data-rh="true" rel="alternate" href="https://updates.cardano.intersectmbo.org/page/138" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Cardano Updates Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Cardano Updates Feed Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="Cardano Updates Feed JSON Feed">



<link rel="alternate" type="application/rss+xml" href="/quarterly/rss.xml" title="Cardano Development Updates RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/quarterly/atom.xml" title="Cardano Development Updates Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/reports/rss.xml" title="Cardano Development Updates RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/reports/atom.xml" title="Cardano Development Updates Atom Feed">

<script src="https://plausible.io/js/script.js" defer="defer" data-domain="updates.cardano.intersectmbo.org"></script><link rel="stylesheet" href="/assets/css/styles.5c10ca85.css">
<link rel="preload" href="/assets/js/runtime~main.f47743d2.js" as="script">
<link rel="preload" href="/assets/js/main.6ffbff6c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Cardano Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Cardano Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Cardano Updates</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="navbar__item navbar__link" href="/quarterly">Quarterly</a><a class="navbar__item navbar__link" href="/reports">Reports</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/tags">Topics</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tags">All Topics</a></li><li><a class="dropdown__link" href="/tags/network">Network</a></li><li><a class="dropdown__link" href="/tags/consensus">Consensus</a></li><li><a class="dropdown__link" href="/tags/ledger">Ledger</a></li><li><a class="dropdown__link" href="/tags/hydra">Hydra</a></li><li><a class="dropdown__link" href="/tags/db-sync">DB Sync</a></li><li><a class="dropdown__link" href="/tags/cli-api">Node CLI &amp; API</a></li><li><a class="dropdown__link" href="/quarterly/tags/cli-api-quarterly">Node CLI &amp; API Quarterly</a></li><li><a class="dropdown__link" href="/tags/crypto">Crypto</a></li><li><a class="dropdown__link" href="/tags/goedel">Goedel</a></li><li><a class="dropdown__link" href="/tags/mithril">Mithril</a></li><li><a class="dropdown__link" href="/tags/performance-tracing">Performance &amp; Tracing</a></li><li><a class="dropdown__link" href="/reports/tags/benchmarking-reports">Benchmarking Reports</a></li><li><a class="dropdown__link" href="/tags/incident">Incident Reports</a></li><li><a class="dropdown__link" href="/tags/security">Security Reports</a></li></ul></div><a class="navbar__item navbar__link" href="/archive">Archive</a><a href="https://updates.cardano.intersectmbo.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-27-performance-and-tracing">Performance &amp; Tracing Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-24-network">Network Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-22-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-17-hydra">Hydra Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-15-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-14-consensus">Consensus Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-10-sre">SRE Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-08-ledger">Ledger Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-08-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2025-10-08-plutus-core">Plutus Core Team Update</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2022-10-05-consensus">Consensus Team Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-10-05T00:00:00.000Z" itemprop="datePublished">October 5, 2022</time> Â· <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/dnadales" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/dnadales.png" alt="Damian Nadales"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/dnadales" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Damian Nadales</span></a></div><small class="avatar__subtitle" itemprop="description">Consensus Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><p>During the past two weeks, the consensus team worked on improving the
performance of the ChainSync jumping logic, which is needed for Genesis. We also
rewrote the implementation of the mempool in the UTxO HD prototype which solved
the issues that prevented us from running system level benchmarks. Also on the
UTxO HD front, we have an improved implementation of the sequence-of-differences
(a crucial piece of UTxO HD), and we also elaborated a test sign-off list for
the UTxO HD feature.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="executive-summary">Executive summary<a class="hash-link" href="#executive-summary" title="Direct link to heading">â</a></h2><ul><li>With the latest implementation of ChainSync jumping we are closer to the
baseline performance. In particular, the prototype seems to benefit from the
extra concurrency provided by additional capabilities.</li><li>We rewrote the implementation of the mempool in the UTxO HD prototype. This
rewrite was required due to performance problems we observed when running the
<a href="https://github.com/input-output-hk/cardano-node/blob/master/Makefile#L51" target="_blank" rel="noopener noreferrer">workbench</a>.
These performance problems prevented us from running system level benchmarks.
The rewrite solved these issues. After the <a href="https://github.com/input-output-hk/ouroboros-network/pull/4049" target="_blank" rel="noopener noreferrer">UTxO-HD: mempool
rewrite</a> PR is
merged, we will contact the Benchmarking team so that they run the system
level benchmarks.</li><li>The implementation of sequences of differences based on anti-diffs was
integrated into the UTxO HD prototype. It is pending
<a href="https://github.com/input-output-hk/ouroboros-network/pull/4036" target="_blank" rel="noopener noreferrer">review</a> and
we also need to run replay and syncing benchmarks to confirm that this will
deliver a performance improvement, as observed in our micro-benchmarks.</li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/3944" target="_blank" rel="noopener noreferrer">The UTxO HD prototype
inspection</a>
resulted in a <a href="https://github.com/input-output-hk/ouroboros-network/issues/4045" target="_blank" rel="noopener noreferrer">list of
tests</a>
needed for consensus to consider the UTxO HD prototype as fully tested.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-information">Additional information<a class="hash-link" href="#additional-information" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">â</a></h3><p>Benchmarking setup: 50MBit/s, 50ms latency</p><ul><li>Red: baseline</li><li>Green: Current CSJ prototype, 10 peers, jumps every 3000/f slots.</li></ul><p>As ChainSync Jumping involves many concurrent network operations at every jump,
we tried to run the node with 6 instead of the default 2 capabilties.</p><ul><li>Orange: baseline with 6 capabilities</li><li>Blue: CSJ prototype with 6 capabilities</li></ul><p>This diagram shows the respective syncing progress, starting at Genesis and
continuing a good part into Shelley (with the dashed line indicating the
Byron-to-Shelley transition).</p><p><img loading="lazy" src="/assets/images/happy-path-csj-prototype-bench-1-2c33ba45f44a086415e703fe8f0f7ad1.svg" width="654" height="459" class="img_ev3q"></p><p>Further work includes whether we can tune the prototype to better handle few
capabilities, or to adapt the default number of capabilities (potentially just
while syncing).</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/consensus">consensus</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2022-10-04-db-sync">DB Sync Team Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-10-04T00:00:00.000Z" itemprop="datePublished">October 4, 2022</time> Â· <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/kderme" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/kderme.png" alt="Kostas Dermentzis"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/kderme" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Kostas Dermentzis</span></a></div><small class="avatar__subtitle" itemprop="description">Cardano DB-Sync Software Engineer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dbsync-update">DBSync Update<a class="hash-link" href="#dbsync-update" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fast-restarts">Fast restarts<a class="hash-link" href="#fast-restarts" title="Direct link to heading">â</a></h3><p> We fixed a long overdue issue in db-sync which caused long delays on restarts
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1266" target="_blank" rel="noopener noreferrer">1266</a>. This has been
one of db-sync main objectives for this period. Restarts are now very fast,
because db-sync deletes almost nothing from the db, it just replays the ledger rules until it
reaches the tip of the db. The fix also improves reconnection speed, in cases where the node
restarts or the connection is temporarily lost. It also speeds up even more in cases where due to a
deployment mess up a very old snapshot or no snapshot at all is used.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="property-based-testing">Property based testing<a class="hash-link" href="#property-based-testing" title="Direct link to heading">â</a></h3><p>We added stateful property based testing, using <code>quickcheck-state-machine</code>
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1269" target="_blank" rel="noopener noreferrer">1269</a>. These tests use empty or
almost empty blocks to test the new behaviour of restarts and rollbacks.</p><p> These tests generate arbitrarily a list of symbolic commands from these:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RollForward Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RollBack BlockNo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StopDBSync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StartDBSync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestartNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AssertBlockNo BlockNo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The commands are translated into real commands. For example <code>RollForward Int</code> will forge a new block
that fits on the current chain. These real commands are executed against db-sync using the mock
chain-sync server. The symbolic commands are executed against a vesy simplistic Model of db-sync
which looks like this:</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token constant" style="color:#36acaa">Model</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token hvariable">serverTip</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">BlockNo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token hvariable">dbSyncTip</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">BlockNo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token hvariable">dbSynsIsOn</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token hvariable">dbSynsHasSynced</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">::</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">Bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally a number of postconditions are checked, related to the eventual block number of db-sync.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tech-debt">Tech Debt<a class="hash-link" href="#tech-debt" title="Direct link to heading">â</a></h3><p>We handled a number of tech debt in
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1275" target="_blank" rel="noopener noreferrer">1275</a>
This improves the code format of db-sync, deletes many queries that were never used and groups the
others. This tech debt resolution not only improves the experience of working in db-sync, but can
facilitate some of our other objectives, as it makes it very explicit which queries are used
during syncing and which indexes are necessary.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="smash">Smash<a class="hash-link" href="#smash" title="Direct link to heading">â</a></h3><p>We worked on fixing an issue related to fetching pool metadata
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1276" target="_blank" rel="noopener noreferrer">1276</a>.
The issue which is described in
<a href="https://github.com/input-output-hk/cardano-db-sync/issues/1270" target="_blank" rel="noopener noreferrer">1270</a></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/db-sync">db-sync</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2022-10-04-node-cli-api">Node API &amp; CLI Team Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-10-04T00:00:00.000Z" itemprop="datePublished">October 4, 2022</time> Â· <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/Jimbo4350" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/Jimbo4350.png" alt="Jordan Millar"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/Jimbo4350" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jordan Millar</span></a></div><small class="avatar__subtitle" itemprop="description">Node Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="node-api-cli-update">Node-Api-Cli Update<a class="hash-link" href="#node-api-cli-update" title="Direct link to heading">â</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2022-10-04---2022-10-18">2022-10-04 - 2022-10-18<a class="hash-link" href="#2022-10-04---2022-10-18" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="executive-summary">Executive Summary<a class="hash-link" href="#executive-summary" title="Direct link to heading">â</a></h3><p>The majority of the team&#x27;s time was spent between getting <code>1.34.4</code> ready, addressing various feature requests/issues/bugs that have arisen and refactoring components in the api and cli. The current refactoring is aimed at the long term goal of empowering users to be able to easily build applications similar to <code>cardano-cli</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">â</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4504" target="_blank" rel="noopener noreferrer">GHC 9.2.4 preparations</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">â</a></h4><ul><li>[Serenity]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4491" target="_blank" rel="noopener noreferrer">Separate IO from txBuild and txBuildRaw functions</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">â</a></h4><ul><li>[BUGFIX]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4501" target="_blank" rel="noopener noreferrer">TxWitness text envelope format does not roundtrip in Shelley era</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">â</a></h4><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4526" target="_blank" rel="noopener noreferrer">Fix MacOS GHA CI</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">â</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4508" target="_blank" rel="noopener noreferrer">Release 1.34.4</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli-1">cardano-cli<a class="hash-link" href="#cardano-cli-1" title="Direct link to heading">â</a></h4><ul><li>[BUGFIX]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4538" target="_blank" rel="noopener noreferrer">Fix query era mismatch bug in transaction build command</a></li><li>[Serenity]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4516" target="_blank" rel="noopener noreferrer">Condense Read and Validation modules in cardano-cli</a></li><li>[BUGFIX]<!-- -->- <a href="https://github.com/input-output-hk/cardano-node/pull/4537" target="_blank" rel="noopener noreferrer">Stop the cli from changing the bytes in user-supplied data</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4431" target="_blank" rel="noopener noreferrer">Infer protocol params in transaction build</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4408" target="_blank" rel="noopener noreferrer">Allow assembling transactions with no witnesses</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4276" target="_blank" rel="noopener noreferrer">Add tx-mempool command to CLI</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api-1">cardano-api<a class="hash-link" href="#cardano-api-1" title="Direct link to heading">â</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4482" target="_blank" rel="noopener noreferrer">Return Lovelace for calculateMinimumUTxO</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4458" target="_blank" rel="noopener noreferrer">Make TxBodyContent an instance of Monoid</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node-1">cardano-node<a class="hash-link" href="#cardano-node-1" title="Direct link to heading">â</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4263" target="_blank" rel="noopener noreferrer">Stop running CI when the only changes are to docs</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras</a></li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/cli-api">cli-api</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2022-09-30-ledger">Ledger Team Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-30T00:00:00.000Z" itemprop="datePublished">September 30, 2022</time> Â· <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/JaredCorduan" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/JaredCorduan.png" alt="Jared Corduan"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/JaredCorduan" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jared Corduan</span></a></div><small class="avatar__subtitle" itemprop="description">Ledger Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ledger-update">Ledger Update<a class="hash-link" href="#ledger-update" title="Direct link to heading">â</a></h2><p>We have continued focusing nearly entirely on addressing technical debt.
A lot of design work has begun for the next ledger era,
but we do not yet have anything concrete to share.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt-issues-completed">Technical debt issues completed<a class="hash-link" href="#technical-debt-issues-completed" title="Direct link to heading">â</a></h3><ul><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/1676" target="_blank" rel="noopener noreferrer">issue-1676</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/2992" target="_blank" rel="noopener noreferrer">pull-2992</a>] We have finally removed the ledger dependency on the
<code>cardano-prelude</code> package. It was barely used in the ledger repository, and it added a dependency
that we did not want to maintain. It was a bit difficult to remove, and we had
to coordinate removing it from cardano-base.
A lot ended up going into <a href="https://github.com/input-output-hk/cardano-ledger/pull/2992" target="_blank" rel="noopener noreferrer">pull-2992</a>, due to the coordination effort, and we ended
up updating Plutus as well.
This means that we&#x27;ve now also made a lot of progress on the problematic cost model serialization
issues described in <a href="https://github.com/input-output-hk/cardano-ledger/issues/2902" target="_blank" rel="noopener noreferrer">issue-2902</a>.
In particular, after we resolve <a href="https://github.com/input-output-hk/cardano-ledger/issues/3014" target="_blank" rel="noopener noreferrer">issue-3014</a>, we will not have to wait an epoch before
releasing a cost model for a new version of Plutus, as we had to do for the Vasil HF.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/3046" target="_blank" rel="noopener noreferrer">issue-3046</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/3055" target="_blank" rel="noopener noreferrer">pull-3055</a>] We moved a module that is now only used in Byron to a Byron package.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/3047" target="_blank" rel="noopener noreferrer">issue-3047</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/3054" target="_blank" rel="noopener noreferrer">pull-3054</a>] We improved the interface to the <code>Value</code> (multi-asset) type.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3044" target="_blank" rel="noopener noreferrer">pull-3044</a>] We debugged and fixed a tricky compilation issue. Certain kinds of field updates
were adding approximately 20 minutes to our compile time!</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/2932" target="_blank" rel="noopener noreferrer">issue-2932</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/3036" target="_blank" rel="noopener noreferrer">pull-3036</a>] As a part of our ongoing re-organization of the codebase, we
have added a <code>Cardano.Ledger.[Era].Core</code> module to each ledger era that has a TxBody class.
Most classes defined in the era should go in this new module.
We also re-export the <code>Cardno.Ledger.Core</code> module and the previous <code>Cardano.Ledger.[Era].Core</code>
modules from each era.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt-in-progress">Technical debt in progress<a class="hash-link" href="#technical-debt-in-progress" title="Direct link to heading">â</a></h3><ul><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/3034" target="_blank" rel="noopener noreferrer">issue-3034</a>][<a href="https://github.com/input-output-hk/cardano-ledger/issues/3035" target="_blank" rel="noopener noreferrer">issue-3035</a>][<a href="https://github.com/input-output-hk/cardano-node/issues/4421" target="_blank" rel="noopener noreferrer">node-issue-4421</a>] We are continuing to write benchmarks to understand exactly where
all the time is being spent on executing the <code>TICKF</code> transition.
The consolidation of the per-stake-credential stake distribution to the per-stake-pool
distribution does seem to account for a large amount of time (near a second as written, which we
have down to about half a second with some optimizations),
but this does not account for everything.
Applying the reward update may also be a big contributing factor.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3033" target="_blank" rel="noopener noreferrer">pull-3033</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/3038" target="_blank" rel="noopener noreferrer">pull-3038</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/3041" target="_blank" rel="noopener noreferrer">pull-3041</a>] A separate team is working on upgrading all the
cardano-node repositories to work with ghc 9.2.4. We have been helping out with this effort.</li><li>The nix scripts used to build our new
<a href="https://github.com/input-output-hk/formal-ledger-specifications" target="_blank" rel="noopener noreferrer">formal ledger model</a>
do not work consistently for everyone, and we have been working on fixing these issues.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/3014" target="_blank" rel="noopener noreferrer">issue-3014</a>] We are still working on adding a versioning scheme to all of the ledger
serializers.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/ledger">ledger</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2022-09-27-network">Network Team Update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-27T00:00:00.000Z" itemprop="datePublished">September 27, 2022</time> Â· <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/coot.png" alt="Marcin Szamotulski"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/coot" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Marcin Szamotulski</span></a></div><small class="avatar__subtitle" itemprop="description">Network Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-update">Network Update<a class="hash-link" href="#network-update" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ouroboros-network">Ouroboros Network<a class="hash-link" href="#ouroboros-network" title="Direct link to heading">â</a></h3><ul><li>We finished high and low level <em>peer sharing</em> design. See
<a href="https://github.com/input-output-hk/ouroboros-network/wiki/Peer-Sharing-Implementation-Plan" target="_blank" rel="noopener noreferrer">Peer Sharing Implementation Plan</a></li><li>We started working on low-level design of <em>eclipse evasion</em> (work in
progress).</li><li>We decided to use <strong>peer sharing</strong> instead of overloaded and ambiguous <em>gossip</em> term.
<a href="https://github.com/input-output-hk/ouroboros-network/pull/3980" target="_blank" rel="noopener noreferrer">PR input-output-hk/ouroboros-network#3980</a></li><li>We fixed technical dept
<a href="https://github.com/input-output-hk/ouroboros-network/issues/3905" target="_blank" rel="noopener noreferrer">issue input-output-hk/cardano-node#3905</a> in
the simulation testing of diffusion
<a href="https://github.com/input-output-hk/ouroboros-network/pull/4004" target="_blank" rel="noopener noreferrer">PR input-output-hk/cardano-node#4004</a></li><li>We deployed all our nodes using our new nix based deployment architecture.
When deploying we found an issue in the
<a href="https://github.com/input-output-hk/cardano-node/issues/3752" target="_blank" rel="noopener noreferrer"><code>RTView</code></a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ouroboros-consensus">Ouroboros Consensus<a class="hash-link" href="#ouroboros-consensus" title="Direct link to heading">â</a></h3><ul><li>Recently we found out that the consensus does not log exceptions thrown during
intiialisation.  This was fixed in
<a href="https://github.com/input-output-hk/ouroboros-network/pull/4015" target="_blank" rel="noopener noreferrer">PR input-output-hk/ouroboros-network#4015</a>
As part of this pull request we also changed that all exceptions rethrown by
the connection handler thread are wrapped in <code>ExceptionInHandler</code>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="some-older-items-which-were-not-announced">Some older items, which were not announced<a class="hash-link" href="#some-older-items-which-were-not-announced" title="Direct link to heading">â</a></h4><ul><li>We identified and fixed an issue related to socket activation (socket options
where not set for sockets passed through socket activation).
<a href="https://github.com/input-output-hk/ouroboros-network/pull/3979" target="_blank" rel="noopener noreferrer">PR input-output-hk/cardano-node#3979</a>
This fix will be released in the next <code>cardano-node</code> release.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">Cardano Node<a class="hash-link" href="#cardano-node" title="Direct link to heading">â</a></h3><ul><li>We extended the NixOs service module so that one can modify <code>socketPath</code>,
<code>runtimeDir</code>, <code>databasePath</code>, <code>traceSocketPathAccept</code>,
<code>traceSocketPathConnect</code> and <code>stateDir</code> options.
<a href="https://github.com/input-output-hk/cardano-node/pull/4196" target="_blank" rel="noopener noreferrer">PR input-output-hk/cardano-node#4196</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="io-sim">IO-Sim<a class="hash-link" href="#io-sim" title="Direct link to heading">â</a></h3><p>We resolved a number of issues before release of <code>io-sim</code> on hackage:</p><ul><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/2797" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#2797</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/2650" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#2650</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/3436" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#3436</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/2588" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#2588</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/2587" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#2587</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/2586" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#2586</a></li></ul><p>See <a href="https://github.com/input-output-hk/io-sim/pull/24" target="_blank" rel="noopener noreferrer">PR #24</a>.</p><p>We also improved experience for contributors of <code>io-sim</code> and <code>typed-protocols</code> by adding issue templates:</p><ul><li><a href="https://github.com/input-output-hk/io-sim/pull/25" target="_blank" rel="noopener noreferrer">PR input-output-hk/io-sim#25</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="typed-protocols">Typed Protocols<a class="hash-link" href="#typed-protocols" title="Direct link to heading">â</a></h3><ul><li>We pushed a branch which identifies a GHC quirk:
<a href="https://github.com/input-output-hk/typed-protocols/tree/coot/typed-protocols-rewrite-StateToken-problem" target="_blank" rel="noopener noreferrer">coot/typed-protocols-rewrite-StateToken-problem</a>.
That&#x27;s too be resolved in order to push forward review of the redesign in
<a href="https://github.com/input-output-hk/typed-protocols/pull/3" target="_blank" rel="noopener noreferrer">PR input-output-hk/typed-protocols#3</a>.</li><li>As for <code>io-sim</code>, we wrote issue templates:
<a href="https://github.com/input-output-hk/typed-protocols/pull/11" target="_blank" rel="noopener noreferrer">PR input-output-hk/typed-protocols#11</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="input-endorsers-simulation">Input Endorsers Simulation<a class="hash-link" href="#input-endorsers-simulation" title="Direct link to heading">â</a></h3><p>New features include:</p><ul><li><p>Histograms of block arrival frequency, for both network (inbound) and CPU
(block validation). This is interesting to check that we&#x27;re not overloading
the CPU block validation capacity, or network link capacity. Or alternatively
to observe the behaviour in an overload situation if we set the block
generation rate high enough.</p></li><li><p>Pie chart of utilisation of TCP links. This shows how small a fraction of
links are being used at any one time, and shows that once the system &quot;warms
up&quot; and is operating stably, most block delivery is ballistic.</p></li><li><p>Showing off the new screen layout combinators, that let us put multiple
charts, titles etc on screen at once and scale them to whatever screen or
video resolution we like without having to tweak numbers (this example is
scaled to fit 1080HD video resolution).</p></li></ul><div style="width:640px;height:360px"></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/network">network</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/page/137"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/page/139"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/tags">Tags</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Intersect, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f47743d2.js"></script>
<script src="/assets/js/main.6ffbff6c.js"></script>
</body>
</html>